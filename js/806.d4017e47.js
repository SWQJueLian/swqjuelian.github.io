"use strict";(self["webpackChunkmyshop"]=self["webpackChunkmyshop"]||[]).push([[806],{7806:function(e,t,o){o.r(t),o.d(t,{default:function(){return u}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"comment-sku"},[t("van-nav-bar",{attrs:{title:"评价商品","left-text":"返回","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),t("div",{staticClass:"main"},[t("div",{staticClass:"comment-sku-item"},[t("div",{staticClass:"goods-info"},[t("div",{staticClass:"goods-img"},[t("img",{attrs:{src:e.detailGoods.goods_image,alt:""}})]),t("div",{staticClass:"goods-content"},[t("div",{staticClass:"text-ellipsis-2"},[e._v(" "+e._s(e.detailGoods.goods_name)+" ")])])]),t("div",{staticClass:"rate"},[e._v(" 评分："),t("van-rate",{model:{value:e.rateNum,callback:function(t){e.rateNum=t},expression:"rateNum"}})],1),t("div",[t("van-field",{attrs:{rows:"2",autosize:{maxHeight:100,minHeight:100},clearable:"",type:"textarea",maxlength:"500",placeholder:"感觉怎样？跟大家分享一下吧~","show-word-limit":""},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),t("div",[t("van-uploader",{attrs:{multiple:"","max-count":10,"after-read":e.afterRead,"before-delete":e.beforeDelete},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1),t("div",{staticClass:"van-hairline--bottom"}),t("button",{on:{click:e.handlerSubmitComment}},[e._v("提交评价")])])])],1)},a=[],i=(o(9491),o(6450)),r=(o(7658),o(1463)),d=o(3822),n={name:"ProductCommentDetail",created(){(0,i.Z)("因为api文档的接口没写清楚怎么传评价，所以只实现了动态渲染数据、上传图片，但是无法发送评论）")},data(){return{rateNum:0,message:"",fileList:[],uploadFileInfo:[]}},methods:{async afterRead(e,t){const o=await(0,r.Ix)(e.file);console.log(o),this.uploadFileInfo.push(o.data.fileInfo)},beforeDelete(e,t){return console.log(e),!0},async handlerSubmitComment(){const e=await(0,r.rd)(this.detailGoods.order_id,[{goods_id:this.goods_id,order_goods_id:this.order_goods_id,score:2*this.rateNum,content:this.message,imageList:[{},{}],uploaded:["10307","10308"]}]);console.log(e,"评价")}},computed:{...(0,d.Se)("comment",["commentGoods"]),order_goods_id(){return+this.$route.query.order_goods_id},goods_id(){return+this.$route.query.goods_id},detailGoods(){return this.commentGoods.goods.find((e=>e.order_goods_id===+this.order_goods_id&&e.goods_id===this.goods_id))}}},l=n,c=o(1001),m=(0,c.Z)(l,s,a,!1,null,"0c6e8ed4",null),u=m.exports},1463:function(e,t,o){o.d(t,{Ix:function(){return n},U3:function(){return i},cq:function(){return r},jn:function(){return a},rd:function(){return d}});var s=o(4471);const a=e=>s.Z.get("/goods/detail",{params:{goodsId:e}}),i=(e,t,o)=>s.Z.get("/comment/list",{params:{goodsId:e,scoreType:t,page:o}}),r=e=>s.Z.get("/comment/total",{params:{goodsId:e}}),d=(e,t)=>s.Z.post("/order.comment/submit",{orderId:e,form:t}),n=e=>{const t=new FormData;return t.append("file",e),s.Z.post("/upload/image",t,{headers:{"Content-Type":"multipart/form-data"}})}}}]);
//# sourceMappingURL=806.d4017e47.js.map