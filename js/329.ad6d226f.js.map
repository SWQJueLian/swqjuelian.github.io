{"version":3,"file":"js/329.ad6d226f.js","mappings":"wJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,uBAAsB,EAAK,aAAa,GAAG,QAAS,GAAOC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOP,EAAIQ,QAAQC,IAAI,EAAE,GAAGC,YAAYV,EAAIW,GAAG,CAAC,CAACC,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACX,EAAG,aAAa,CAACG,MAAM,CAAC,WAAY,EAAM,MAAQ,QAAQ,YAAc,YAAYC,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOP,EAAIc,cAAcd,EAAIe,WAAW,GAAGL,YAAYV,EAAIW,GAAG,CAAC,CAACC,IAAI,aAAaC,GAAG,WAAW,MAAO,CAACX,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,OAAO,KAAO,MAAMC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIgB,OAAO,UAAU,KAAK,EAAEC,OAAM,KAAQC,MAAM,CAACC,MAAOnB,EAAIe,WAAYK,SAAS,SAAUC,GAAMrB,EAAIe,WAAWM,CAAG,EAAEC,WAAW,gBAAgB,EAAEL,OAAM,GAAM,CAACL,IAAI,QAAQC,GAAG,WAAW,MAAO,CAACX,EAAG,OAAO,CAACE,YAAY,gBAAgBE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIc,cAAcd,EAAIe,WAAW,IAAI,CAACf,EAAIuB,GAAG,QAAQ,EAAEN,OAAM,OAAUf,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIwB,GAAG,GAAGtB,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,WAAW,KAAO,MAAMC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIyB,cAAc,MAAM,GAAGvB,EAAG,MAAM,CAACE,YAAY,QAAQJ,EAAI0B,GAAI1B,EAAI2B,gBAAgB,SAASC,GAAM,OAAO1B,EAAG,MAAM,CAACU,IAAIgB,EAAKxB,YAAY,YAAYE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIc,cAAcc,EAAK,IAAI,CAAC5B,EAAIuB,GAAG,IAAIvB,EAAI6B,GAAGD,GAAM,MAAM,IAAG,MAAM,EACv1C,EACIE,EAAkB,CAAC,WAAY,IAAI9B,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,OAAO,CAACA,EAAG,IAAI,CAACF,EAAIuB,GAAG,WACjG,G,SCyCA,GACAQ,KAAA,aACAC,IAAAA,GACA,OACAL,gBAAAM,EAAAA,EAAAA,MACAlB,WAAA,GAEA,EACAmB,QAAA,CAEAT,YAAAA,GACA,KAAAE,eAAA,IACAQ,EAAAA,EAAAA,IAAA,KAAAR,eACA,EAEAb,aAAAA,CAAAF,GAEA,QAAAA,EAAAwB,OAAA,CAEA,MAAAC,EAAA,KAAAV,eAAAW,QAAA1B,IAEA,IAAAyB,GACA,KAAAV,eAAAY,OAAAF,EAAA,GAGA,KAAAV,eAAAa,QAAA5B,IAEAuB,EAAAA,EAAAA,IAAA,KAAAR,eACA,CAEA,KAAAnB,QAAAiC,QAAA,0BAAA7B,IACA,IC3EoQ,I,UCQhQ8B,GAAY,OACd,EACA3C,EACA+B,GACA,EACA,KACA,WACA,MAIF,EAAeY,EAAiB,O","sources":["webpack://myshop/./src/views/search/search-page.vue","webpack://myshop/src/views/search/search-page.vue","webpack://myshop/./src/views/search/search-page.vue?a537","webpack://myshop/./src/views/search/search-page.vue?166a"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search\"},[_c('van-nav-bar',{attrs:{\"safe-area-inset-top\":true,\"left-arrow\":\"\",\"border\":false},on:{\"click-left\":function($event){return _vm.$router.go(-1)}},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('van-search',{attrs:{\"clearable\":false,\"shape\":\"round\",\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":function($event){return _vm.searchProduct(_vm.search_key)}},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"paid\",\"size\":\"20\"},on:{\"click\":function($event){return _vm.$toast('打开相机...')}}})]},proxy:true}]),model:{value:(_vm.search_key),callback:function ($$v) {_vm.search_key=$$v},expression:\"search_key\"}})]},proxy:true},{key:\"right\",fn:function(){return [_c('span',{staticClass:\"mybtn-search2\",on:{\"click\":function($event){return _vm.searchProduct(_vm.search_key)}}},[_vm._v(\"搜索\")])]},proxy:true}])}),_c('div',{staticClass:\"search-history\"},[_c('div',{staticClass:\"title\"},[_vm._m(0),_c('van-icon',{attrs:{\"name\":\"delete-o\",\"size\":\"20\"},on:{\"click\":function($event){return _vm.clearHistory()}}})],1),_c('div',{staticClass:\"list\"},_vm._l((_vm.search_history),function(item){return _c('div',{key:item,staticClass:\"list-item\",on:{\"click\":function($event){return _vm.searchProduct(item)}}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),0)])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('span',[_c('b',[_vm._v(\"搜索历史\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"search\">\r\n    <van-nav-bar :safe-area-inset-top=\"true\" left-arrow :border=\"false\"\r\n                 @click-left=\"$router.go(-1)\"\r\n    >\r\n      <template #title>\r\n        <van-search\r\n          @search=\"searchProduct(search_key)\"\r\n          :clearable=\"false\"\r\n          v-model=\"search_key\"\r\n          shape=\"round\"\r\n          placeholder=\"请输入搜索关键词\">\r\n          <template #right-icon>\r\n            <van-icon @click=\"$toast('打开相机...')\" name=\"paid\" size=\"20\"/>\r\n          </template>\r\n        </van-search>\r\n      </template>\r\n      <template #right>\r\n        <span class=\"mybtn-search2\" @click=\"searchProduct(search_key)\">搜索</span>\r\n      </template>\r\n    </van-nav-bar>\r\n    <!-- 搜索历史 -->\r\n    <div class=\"search-history\">\r\n      <div class=\"title\">\r\n        <span><b>搜索历史</b></span>\r\n        <!-- 删除全部搜索历史，直接给一个空列表就行了-->\r\n        <van-icon @click=\"clearHistory()\" name=\"delete-o\" size=\"20\"/>\r\n      </div>\r\n      <div class=\"list\">\r\n        <div v-for=\"item in search_history\" :key=\"item\" class=\"list-item\" @click=\"searchProduct(item)\">\r\n          {{ item }}\r\n        </div>\r\n        <!--<div class=\"list-item\" @click=\"$router.push('/searchlist?searchkey=炒锅')\">炒锅</div>\r\n        <div class=\"list-item\" @click=\"$router.push('/searchlist?searchkey=电视')\">电视</div>\r\n        <div class=\"list-item\" @click=\"$router.push('/searchlist?searchkey=冰箱')\">冰箱</div>\r\n        <div class=\"list-item\" @click=\"$router.push('/searchlist?searchkey=手机')\">手机</div>-->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchHistory, setSearchHistory } from '@/utils/stroage'\r\n\r\nexport default {\r\n  name: 'SearchPage',\r\n  data () {\r\n    return {\r\n      search_history: getSearchHistory(),\r\n      search_key: ''\r\n    }\r\n  },\r\n  methods: {\r\n    // 清空搜索历史记录\r\n    clearHistory () {\r\n      this.search_history = []\r\n      setSearchHistory(this.search_history)\r\n    },\r\n    // 搜索商品\r\n    searchProduct (key) {\r\n      // 修复：key为空的时候不保存搜索历史记录。\r\n      if (key.trim() !== '') {\r\n        // 查找搜索关键词是否已经在搜索历史列表中\r\n        const index = this.search_history.indexOf(key)\r\n        // 如果在就删除掉\r\n        if (index !== -1) {\r\n          this.search_history.splice(index, 1)\r\n        }\r\n        // 再次将关键词放入到数组的最前面中\r\n        this.search_history.unshift(key)\r\n        // 保存到localstorage中\r\n        setSearchHistory(this.search_history)\r\n      }\r\n      // 跳转到搜索详情页\r\n      this.$router.replace(`/search_list?searchkey=${key}`)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n::v-deep .van-nav-bar__title {\r\n  max-width: 100%;\r\n  margin: 0 auto 0 45px;\r\n}\r\n\r\n::v-deep .van-nav-bar__left {\r\n  padding-right: 0px;\r\n}\r\n\r\n.mybtn-search2 {\r\n  padding: 2px 10px;\r\n  background: linear-gradient(to right, orange, orangered);\r\n  border-radius: 20px;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.search {\r\n  .title {\r\n    height: 40px;\r\n    line-height: 40px;\r\n    font-size: 14px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 15px;\r\n  }\r\n\r\n  .list {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    flex-wrap: wrap;\r\n    padding: 0 10px;\r\n    gap: 5%;\r\n  }\r\n\r\n  .list-item {\r\n    width: 20%;\r\n    text-align: center;\r\n    padding: 3px;\r\n    line-height: 15px;\r\n    border-radius: 50px;\r\n    background: #f8f8f8;\r\n    font-size: 13px;\r\n    border: 1px solid #efefef;\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search-page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search-page.vue?vue&type=template&id=3a594075&scoped=true&\"\nimport script from \"./search-page.vue?vue&type=script&lang=js&\"\nexport * from \"./search-page.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search-page.vue?vue&type=style&index=0&id=3a594075&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a594075\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","scopedSlots","_u","key","fn","searchProduct","search_key","$toast","proxy","model","value","callback","$$v","expression","_v","_m","clearHistory","_l","search_history","item","_s","staticRenderFns","name","data","getSearchHistory","methods","setSearchHistory","trim","index","indexOf","splice","unshift","replace","component"],"sourceRoot":""}