{"version":3,"file":"js/406.6a4d7256.js","mappings":"wJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,aAAa,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOP,EAAIQ,QAAQC,MAAM,KAAKP,EAAG,mBAAmB,CAACG,MAAM,CAAC,MAAQL,EAAIU,iBAAiB,KAAOV,EAAIW,sBAAsB,gBAAgBX,EAAIY,aAAa,gBAAgB,aAAa,mBAAmB,MAAMN,GAAG,CAAC,IAAMN,EAAIa,aAAa,KAAOb,EAAIc,cAAc,OAASd,EAAIe,kBAAkB,EACze,EACIC,EAAkB,G,8BCyBtB,GACAC,KAAA,cACAC,IAAAA,GACA,OAmBAC,gBAAA,GACAP,aAAA,CACA,CACAQ,GAAA,IACAH,KAAA,KACAI,IAAA,aACAC,QAAA,uBAIA,EACAC,OAAAA,GACA,KAAAC,gCACA,EACAC,QAAA,CAEA,mBAAAV,CAAAW,EAAAC,GACAC,QAAAC,IAAAH,SAGAI,EAAAA,EAAAA,IAAAJ,EAAAN,IACA,KAAAW,OAAAC,OAAA,iCAAAN,EAAAN,GACA,EACAP,YAAAA,GAEA,KAAAL,QAAAyB,KAAA,CACAC,KAAA,6BAEA,EACApB,aAAAA,CAAAY,EAAAC,GAEA,KAAAnB,QAAAyB,KAAA,CACAC,KAAA,mBACAC,MAAA,CACAf,GAAAM,EAAAN,KAGA,MACAgB,EAAAA,EAAAA,IAAA,+CAEAC,SAAA,KACAC,EAAAA,EAAAA,IAAA,kDAEA3B,qBAAAA,GACA,MAAA4B,EAAA,GAaA,OAZA,KAAAC,gBAAAC,SAAAf,IACA,MAAAgB,EAAAC,OAAAC,OAAAlB,EAAAgB,QACAA,EAAAT,KAAAP,EAAAmB,QACA,MAAAC,EAAA,CACA1B,GAAAM,EAAAqB,WACA9B,KAAAS,EAAAT,KACAI,IAAAK,EAAAsB,MACA1B,QAAAoB,EAAAO,KAAA,KACAC,UAAAxB,EAAAqB,aAAA,KAAArC,kBAEA6B,EAAAN,KAAAa,EAAA,IAEAP,CACA,IC3GoQ,I,UCQhQY,GAAY,OACd,EACApD,EACAiB,GACA,EACA,KACA,WACA,MAIF,EAAemC,EAAiB,O","sources":["webpack://myshop/./src/views/addresses/useraddress.vue","webpack://myshop/src/views/addresses/useraddress.vue","webpack://myshop/./src/views/addresses/useraddress.vue?f616","webpack://myshop/./src/views/addresses/useraddress.vue?1a52"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-address\"},[_c('van-nav-bar',{attrs:{\"title\":\"收货地址\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),_c('van-address-list',{attrs:{\"value\":_vm.defaultAddressId,\"list\":_vm.generatorShowListData,\"disabled-list\":_vm.disabledList,\"disabled-text\":\"以下地址超出配送范围\",\"default-tag-text\":\"默认\"},on:{\"add\":_vm.onAddAddress,\"edit\":_vm.onEditAddress,\"select\":_vm.selectAddress}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"user-address\">\r\n    <van-nav-bar\r\n      title=\"收货地址\"\r\n      left-arrow\r\n      @click-left=\"$router.back()\"\r\n    />\r\n    <!-- 不能用v-model，你不能去改vuex中的数据... ，改成:value绑定就可以设置默认值\r\n          v-model=\"chosenAddressId\"  -> :value=\"defaultAddressId\"\r\n     -->\r\n    <van-address-list\r\n      :value=\"defaultAddressId\"\r\n      :list=\"generatorShowListData\"\r\n      :disabled-list=\"disabledList\"\r\n      disabled-text=\"以下地址超出配送范围\"\r\n      default-tag-text=\"默认\"\r\n      @add=\"onAddAddress\"\r\n      @edit=\"onEditAddress\"\r\n      @select=\"selectAddress\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from 'vuex'\r\nimport { setDefaultAddress } from '@/apis/address'\r\n\r\nexport default {\r\n  name: 'userAddress',\r\n  data () {\r\n    return {\r\n      /*\r\n      chosenAddressId: this.defaultAddressId,\r\n      list: [\r\n        {\r\n          id: '1',\r\n          name: '张三',\r\n          tel: '13000000000',\r\n          address: '浙江省杭州市西湖区文三路 138 号东方通信大厦 7 楼 501 室',\r\n          isDefault: true\r\n        },\r\n        {\r\n          id: '2',\r\n          name: '李四',\r\n          tel: '1310000000',\r\n          address: '浙江省杭州市拱墅区莫干山路 50 号'\r\n        }\r\n      ],\r\n      */\r\n      choiceAddressId: '',\r\n      disabledList: [\r\n        {\r\n          id: '3',\r\n          name: '王五',\r\n          tel: '1320000000',\r\n          address: '浙江省杭州市滨江区江南大道 15 号'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  created () {\r\n    this.getUserAddressListAndDefaultID()\r\n  },\r\n  methods: {\r\n    // item: 地址对象，index: 索引\r\n    async selectAddress (item, index) {\r\n      console.log(item)\r\n      // 正常来讲，后端应该提供修改结算的地址接口的，但是没有，所以这里就直接设置默认地址了。这样的话结算页面会改变显示。\r\n      // this.choiceAddressId = item.id\r\n      await setDefaultAddress(item.id)\r\n      this.$store.commit('address/updateDefaultAddressId', item.id)\r\n    },\r\n    onAddAddress () {\r\n      // this.$toast('新增地址')\r\n      this.$router.push({\r\n        path: '/useraddressedit?mode=add'\r\n      })\r\n    },\r\n    onEditAddress (item, index) {\r\n      // this.$toast('编辑地址:' + index)\r\n      this.$router.push({\r\n        path: '/useraddressedit',\r\n        query: {\r\n          id: item.id // 选中的addressid然后传递给useraddressedit页面\r\n        }\r\n      })\r\n    },\r\n    ...mapActions('address', ['getUserAddressListAndDefaultID'])\r\n  },\r\n  computed: {\r\n    ...mapGetters('address', ['defaultAddressId', 'userAddressList']),\r\n    // 生成符合vant-ui需要的用户地址数据结构\r\n    generatorShowListData () {\r\n      const listArr = []\r\n      this.userAddressList.forEach(item => {\r\n        const region = Object.values(item.region)\r\n        region.push(item.detail)\r\n        const obj = {\r\n          id: item.address_id,\r\n          name: item.name,\r\n          tel: item.phone,\r\n          address: region.join(','), // 列表显示的详情地址，包含省市区+detail\r\n          isDefault: item.address_id === this.defaultAddressId\r\n        }\r\n        listArr.push(obj)\r\n      })\r\n      return listArr\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.van-address-list__bottom {\r\n  bottom: 50px;\r\n}\r\n\r\n.user-address {\r\n  background-color: #F7F8FA;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./useraddress.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./useraddress.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./useraddress.vue?vue&type=template&id=7be644da&scoped=true&\"\nimport script from \"./useraddress.vue?vue&type=script&lang=js&\"\nexport * from \"./useraddress.vue?vue&type=script&lang=js&\"\nimport style0 from \"./useraddress.vue?vue&type=style&index=0&id=7be644da&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7be644da\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","defaultAddressId","generatorShowListData","disabledList","onAddAddress","onEditAddress","selectAddress","staticRenderFns","name","data","choiceAddressId","id","tel","address","created","getUserAddressListAndDefaultID","methods","item","index","console","log","setDefaultAddress","$store","commit","push","path","query","mapActions","computed","mapGetters","listArr","userAddressList","forEach","region","Object","values","detail","obj","address_id","phone","join","isDefault","component"],"sourceRoot":""}